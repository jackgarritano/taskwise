import * as chrono from 'chrono-node';
export {parsedDate}

const parsedDate = function(){
    let obj = {
        'dateArr': []
    };

    obj['compare'] = function(parsedObj){
        let add;
        let minIncrement;
        if(this.dateArr.length > parsedObj.length){ //problem is that add seems to always be true?
            minIncrement = parsedObj.length;
            add = false;
        }
        else{
            minIncrement = this.dateArr.length;
            add = true;
        }

        for(let i=0; i<minIncrement; i++){
            if(this.dateArr[i].date !== `${parsedObj[i].start.get('month')}/${parsedObj[i].start.get('day')}/${parsedObj[i].start.get('year')}`){
                console.log('requested delete at :' + i);
                return {
                    add,
                    index:i,
                };
            }
        }
        if(this.dateArr.length == parsedObj.length){
            return {
                'add':false,
                index:-1,
            }
        }
        return {
            add,
            index:this.dateArr.length,
        }
    }

    obj['add'] = function(day, month, year, index){
        let date = `${month}/${day}/${year}`;
        let dateObj = {
            date,
            'highlight' : true,
        }
        this.dateArr.splice(index, 0, dateObj);
        console.table(this.dateArr);
    }

    obj['remove'] = function(index){ 
        console.table(this.dateArr);
        this.dateArr.splice(index, 1);
        console.table(this.dateArr);
    }

    return obj;
}