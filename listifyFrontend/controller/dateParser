import * as chrono from 'chrono-node';
export {parsedDate}

const parsedDate = function(){
    let obj = {
        'dateArr': []
    };

    obj['compare'] = function(parsedObj){
        let add = this.dateArr.length < parsedObj.length;
        let both = this.dateArr.length == parsedObj.length;
        let minIncrement = Math.min(this.dateArr.length, parsedObj.length);
    
        for(let i=0; i<minIncrement; i++){
            if(this.dateArr[i].date !== `${parsedObj[i].start.get('month')}/${parsedObj[i].start.get('day')}/${parsedObj[i].start.get('year')}`){
                return {
                    add,
                    index: i,
                    both,
                };
            }
        }
    
        if(parsedObj.length < this.dateArr.length){
            return {
                add: false,
                index: minIncrement,
                both,
            };
        }
        else if(parsedObj.length > this.dateArr.length){
            return {
                add: true,
                index: minIncrement,
                both,
            };
        }
        else{
            return {
                add: false,
                index: -1,
                both,
            };
        }
    }

    obj['add'] = function(day, month, year, index){
        let date = `${month}/${day}/${year}`;
        let dateObj = {
            date,
            'highlight' : true,
        }
        this.dateArr.splice(index, 0, dateObj);
        console.table(this.dateArr);
    }

    obj['remove'] = function(index){ 
        console.table(this.dateArr);
        this.dateArr.splice(index, 1);
        console.table(this.dateArr);
    }

    return obj;
}